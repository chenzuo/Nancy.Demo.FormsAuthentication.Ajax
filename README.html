<h1>Nancy.Demo.FormsAuthentication.Ajax</h1>

<p>This demo is intended to supplement the official Nancy FormsAuthentication documentation which assumes that the result of Login() and its variants will be returned to the client as-is. This is not ideal in a scenario where you want to use an AJAX call to handle authentication instead of a normal form submit (e.g. "SPA" sites).</p>

<p>The crux of this demo lies is the Javascript in "~/Views/index.cshtml" which uses the jQuery
cookies plugin to set the "_ncfa" cookie which Nancy uses for managing sessions. This cookie should contain an encoded and encrypted GUID representing the currently logged in user for the authenticated session to be valid.</p>

<h2><strong>In short</strong></h2>

<p>From a NancyModule use</p>

<p><strong>this.LoginWithoutRedirect(guid).Cookies[0].Value</strong></p>

<p>to get the encrypted authentication token, then on the client use</p>

<p><strong>$.cookie('_ncfa', authToken)</strong></p>

<p>to store that token so that future requests will recognise the authenticated user.</p>

<h2>Disclaimer</h2>

<p>This demo is intentionally very narrow in scope and is not intended to demonstrate best practices of any kind.</p>

<p>That said, feel free to pass along your "doing it wrong" and "stfu n00b" feedback:</p>

<p><a href="https://twitter.com/intent/tweet?screen_name=nathanchere&amp;text=Your%20code%20sucks">Tweet to @nathanchere</a></p>

<p><a href="https://twitter.com/nathanchere">Follow @nathanchere</a>            </p>

<p>Better yet, feel free to <a href="https://github.com/ferretallica/Nancy.Demo.FormsAuthentication.Ajax/fork">fork the demo project</a>
and demonstrate how it can be done better.</p>
